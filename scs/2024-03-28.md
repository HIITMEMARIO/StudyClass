## React Router DOMì„ ì‚¬ìš©í•´ì„œ ë¼ìš°íŒ…í•˜ê¸°

> [React Routerì˜ ê³µì‹ ë¬¸ì„œ](https://reactrouter.com/en/main/start/tutorial)ë¥¼ í™œìš© v6.22.3 

### 1. React Router DOM ì„¤ì¹˜

```
yarn add react-router-dom
```

### 2. ë¼ìš°í„° ì¶”ê°€

`createBrowserRouter`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¼ìš°í„°ë¥¼ ìƒì„±í•˜ê³ , ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¼ìš°íŠ¸ êµ¬ì¡°ë¥¼ ì •ì˜í•œë‹¤. `createBrowserRouter`ëŠ” ë¼ìš°í„° êµ¬ì„±ì„ ê°ì²´ í˜•íƒœë¡œ ì„ ì–¸ì ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆê²Œ í•´ì£¼ë©°, ì´ë¥¼ í†µí•´ ë¼ìš°íŠ¸ì˜ êµ¬ì¡°ì™€ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ë³´ë‹¤ ëª…í™•í•˜ê²Œ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤. 

`path`ëŠ” ì‚¬ìš©ìê°€ íŠ¹ì • ìœ„ì¹˜(URL)ë¡œ ì´ë™í–ˆì„ ë•Œ ë³´ì—¬ì¤„ í˜ì´ì§€ ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ê²°ì •í•˜ëŠ” ê·œì¹™ì´ë‹¤. `element`ëŠ” íŠ¹ì • `path`ë¡œ ì´ë™í–ˆì„ ë•Œ ì‹¤ì œë¡œ í™”ë©´ì— ë Œë”ë§ë  ì»´í¬ë„ŒíŠ¸ë¥¼ ì§€ì •í•œë‹¤.

```tsx
// Router.tsx
import { createBrowserRouter } from 'react-router-dom';

export const router = createBrowserRouter([
  {
    path: "/",
    element: <div>Hello world!</div>,
  },
]);
```

### 3. ë¼ìš°í„°ë¥¼ ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš©

ìƒì„±í•œ ë¼ìš°í„°ë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš©í•˜ê¸° ìœ„í•´ `RouterProvider` ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤. ì´ ì»´í¬ë„ŒíŠ¸ì— `router` propì„ ì „ë‹¬í•˜ì—¬, ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì— ë¼ìš°íŒ…ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.

> `main.tsx`ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì§„ì…ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” íŒŒì¼ì´ë‹¤. React ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸ë¡œì„œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì„±í•˜ëŠ” ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ëŠ” ì—­í• ì„ í•œë‹¤. 

```tsx
// main.tsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import { RouterProvider } from 'react-router-dom';
import { router } from './Router';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <RouterProvider router={router} />
  </React.StrictMode>
);
```

### 4. í˜ì´ì§€ ë° ì»´í¬ë„ŒíŠ¸ êµ¬í˜„

ê¸°ëŠ¥ì— ë”°ë¼ í•„ìš”í•œ í˜ì´ì§€ë¥¼ ì •ì˜í•´ë³´ì•˜ë‹¤.

- `/` - ì „ì²´ ì•„í‹°í´ì„ ë³¼ ìˆ˜ ìˆëŠ” ë©”ì¸ í˜ì´ì§€
  - `/topics/:major` - ëŒ€ë¶„ë¥˜ ì£¼ì œì— ëŒ€í•œ í˜ì´ì§€
  - `/topics/:major/:sub` - ì†Œë¶„ë¥˜ ì£¼ì œì— ëŒ€í•œ ìƒì„¸ í˜ì´ì§€
  - `/bookmark` - ì‚¬ìš©ìê°€ ë¶ë§ˆí¬í•œ ì½˜í…ì¸ ë‚˜ í˜ì´ì§€ë¥¼ ëª¨ì•„ ë³¼ ìˆ˜ ìˆëŠ” í˜ì´ì§€
  - `/profile/:id` - ì‚¬ìš©ìì˜ í”„ë¡œí•„ í˜ì´ì§€
  - `/search/:query` - ì‚¬ìš©ìê°€ ì…ë ¥í•œ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” í˜ì´ì§€
  - `*`: ì •ì˜ë˜ì§€ ì•Šì€ ê²½ë¡œì— ì ‘ê·¼í–ˆì„ ë•Œ ë³´ì—¬ì£¼ëŠ” í˜ì´ì§€

ì´ë¥¼ í† ëŒ€ë¡œ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•˜ê³  í•´ë‹¹ ê²½ë¡œì— í•´ë‹¹í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ë„ë¡ ë¼ìš°í„° ì„¤ì •ì„ ë³€ê²½í•œë‹¤.

```
ğŸ“¦linkeeper
 â”£ ğŸ“‚src
 â”ƒ â”£ ğŸ“‚pages
 â”ƒ â”ƒ â”£ ğŸ“œBookmark.tsx
 â”ƒ â”ƒ â”£ ğŸ“œHome.tsx
 â”ƒ â”ƒ â”£ ğŸ“œindex.ts
 â”ƒ â”ƒ â”£ ğŸ“œMajorTopic.tsx
 â”ƒ â”ƒ â”£ ğŸ“œNotFound.tsx
 â”ƒ â”ƒ â”£ ğŸ“œProfile.tsx
 â”ƒ â”ƒ â”£ ğŸ“œSearchResults.tsx
 â”ƒ â”ƒ â”— ğŸ“œSubTopic.tsx
```

```tsx
// Router.tsx
import { createBrowserRouter } from 'react-router-dom';
import Root from './Root';
import {
  Home,
  NotFound,
  MajorTopic,
  SubTopic,
  Bookmark,
  SearchResults,
  Profile,
} from './pages';

export const router = createBrowserRouter([
  {
    path: '/',
    element: <Root />,
    errorElement: <NotFound />, // ì˜¤ë¥˜ ë°œìƒ(ì˜ˆ: ê²½ë¡œ ë§¤ì¹­ ì‹¤íŒ¨) ì‹œ ë³´ì—¬ì¤„ ì»´í¬ë„ŒíŠ¸ë¥¼ ì§€ì •
    children: [
      // index ì†ì„±ì€ ìƒìœ„ ê²½ë¡œì˜ ê²½ë¡œê°€ ì •í™•íˆ ì¼ì¹˜í•  ë•Œ ë Œë”ë§ë˜ëŠ” ê¸°ë³¸ ê²½ë¡œë¥¼ ì •ì˜
      { path: '/', element: <Home />, index: true },
      {
        path: '/topics/:major',
        element: <MajorTopic />,
      },
      {
        path: '/topics/:major/:sub',
        element: <SubTopic />,
      },
      { path: '/bookmark', element: <Bookmark /> },
      { path: '/search/:query', element: <SearchResults /> },
      { path: '/profile/:id', element: <Profile /> },
    ],
  },
]);
```

ë°ì´í„°ì˜ ì‹ë³„ì(ID)ë‚˜ ì–´ë–¤ ë³€ìˆ˜ ê°’ì´ URLì— ì‚¬ìš©ë  ë•Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ URL ê²½ë¡œ ì¼ë¶€ê°€ ë³€í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤. React Routerì—ì„œëŠ” ì´ë ‡ê²Œ ë™ì ìœ¼ë¡œ ë³€í•˜ëŠ” URLì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ **ë™ì  ì„¸ê·¸ë¨¼íŠ¸**ë¥¼ ì‚¬ìš©í•œë‹¤. 

ì˜ˆë¥¼ ë“¤ì–´ í”„ë¡œí•„ í˜ì´ì§€ì˜ ê²½ë¡œë¥¼ ì„¤ì •í•  ë•Œ ê° ì‚¬ìš©ìì˜ ê³ ìœ  IDë¡œ í˜ì´ì§€ë¥¼ êµ¬ë¶„í•œë‹¤ê³  í•˜ë©´ `/profile/:id`ì™€ ê°™ì´ ê²½ë¡œë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. `:id`ëŠ” ë™ì ìœ¼ë¡œ ë³€ê²½ë˜ëŠ” ë¶€ë¶„ìœ¼ë¡œ, ì‹¤ì œ ì‚¬ìš©ì IDë¡œ ëŒ€ì²´ëœë‹¤. URLê³¼ ë¬¸ìì—´ì´ ì¼ì¹˜í•˜ì§€ëŠ” ì•Šì§€ë§Œ ë™ì ìœ¼ë¡œ ì¼ì¹˜í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

ë™ì  ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ë©´ í•˜ë‚˜ì˜ ê²½ë¡œ ì„¤ì •ìœ¼ë¡œ ë‹¤ì–‘í•œ í˜ì´ì§€ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. 

```tsx
// Root.tsx
import { Outlet } from 'react-router-dom';

export default function Root() {
  return (
    <>
      {/* TODO: Header, Footer, Main ë“± ë ˆì´ì•„ì›ƒ ìš”ì†Œ ì¶”ê°€ */}
      <Outlet />
    </>
  );
}
```

`Outlet` ì»´í¬ë„ŒíŠ¸ëŠ” ì¤‘ì²© ë¼ìš°íŒ…ì„ êµ¬í˜„í•  ë•Œ ì‚¬ìš©í•œë‹¤. ë¼ìš°í„°ì—ì„œ ì •ì˜í•œ ê²½ë¡œì™€ ì¼ì¹˜í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¡œ ëŒ€ì²´ë˜ì–´ ë Œë”ë§ëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `/bookmark`ë¡œ ì´ë™í•˜ë©´ `Outlet` ì»´í¬ë„ŒíŠ¸ëŠ” URLê³¼ ë§¤ì¹­ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ `<Bookmark />`ë¡œ ëŒ€ì²´ëœë‹¤.

```tsx
export const router = createBrowserRouter([
  {
    path: '/',
    element: <Root />,
    errorElement: <NotFound />,
    children: [
      { path: '/', element: <Home />, index: true },
      {
        path: '/topics/:major',
        element: <MajorTopic />,
      },
      {
        path: '/topics/:major/:sub',
        element: <SubTopic />,
      },
      { path: '/bookmark', element: <Bookmark /> },
      { path: '/search/:query', element: <SearchResults /> },
      { path: '/profile/:id', element: <Profile /> },
    ],
  },
]);
```

ì¤‘ì²© ë¼ìš°íŒ… êµ¬ì¡°ë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•´ `children` ì†ì„±ì„ ì‚¬ìš©í•˜ì—¬ í•˜ìœ„ ë¼ìš°íŠ¸ë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤. ìœ„ì—ì„œ ì •ì˜í•œ ë¼ìš°í„°ëŠ” `/` ë£¨íŠ¸ ê²½ë¡œì˜ ìì‹ìœ¼ë¡œ ê° ê²½ë¡œë“¤ì´ ì •ì˜ë˜ì–´ ìˆë‹¤. 

`Outlet`ì„ ì‚¬ìš©í•˜ë©´, ë¶€ëª¨-ìì‹ ê´€ê³„ì— ìˆëŠ” ë¼ìš°íŠ¸ ê°„ì— ì»´í¬ë„ŒíŠ¸ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í™œìš©í•œ ì˜ˆë¡œ ê³µí†µ ë ˆì´ì•„ì›ƒ ìš”ì†Œë¥¼ ì—¬ëŸ¬ í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê²ƒì´ë‹¤.

![result](https://scseong.github.io/assets/images/2024-03-28-240328TIL/image-20240328212715470.png)

ê³µí†µ ë ˆì´ì•„ì›ƒì¸ Headerì™€ Sidebar, FooterëŠ” ê·¸ëŒ€ë¡œ ë‘ê³  Main ì˜ì—­ì—ì„œë§Œ í˜ì´ì§€ë§ˆë‹¤ ë‹¤ë¥¸ ì»¨í…ì¸ ë¥¼ ë³´ì—¬ì£¼ê³ ì í•œë‹¤. `Root.tsx` ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë£¨íŠ¸ì—ì„œ ê³µí†µ ë ˆì´ì•„ì›ƒì„ ì •ì˜í•˜ê³  ìì‹ ë¼ìš°íŠ¸ì˜ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ìœ„ì¹˜ë¥¼ `Outlet`ìœ¼ë¡œ ì§€ì •í•œë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ê³µí†µ ë ˆì´ì•„ì›ƒì„ ìœ ì§€í•˜ë©´ì„œ í˜ì´ì§€ë§ˆë‹¤ ê³ ìœ í•œ ì»¨í…ì¸ ë¥¼ ë Œë”ë§ í•  ìˆ˜ ìˆë‹¤.

### êµ¬í˜„

![result](https://scseong.github.io/assets/images/2024-03-28-240328TIL/result.gif)


## ì°¸ê³ ìë£Œ

- [The Power Of CreateBrowserRouter: Optimizing Your React App's Navigation](https://www.dhiwise.com/post/the-power-of-createbrowserrouter-optimizing-your-react-app)
- [createBrowserRouterë¥¼ í†µí•œ Routerê¸°ëŠ¥ ì¶”ê°€](https://velog.io/@adultlee/createBrowserRouter%EB%A5%BC-%ED%86%B5%ED%95%9C-Router%EA%B8%B0%EB%8A%A5-%EC%B6%94%EA%B0%80)
- [React Router ê³µì‹ ë¬¸ì„œ](https://reactrouter.com/en/main/start/concepts)
